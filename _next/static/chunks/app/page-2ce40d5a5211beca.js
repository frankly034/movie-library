(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7814:function(e,n,t){Promise.resolve().then(t.bind(t,5478))},5478:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return m}});var r=t(7437),a=t(1023),i=t(9992),o=t(9199),c=t(7267),s=t(230),l=t(2759),u=t(504),d=t(802);function f(){let e=(0,s._)(["\n  color: #f9f9f9;\n  font-size: 36px;\n\n  &:hover {\n    color: #ffbf00;\n  }\n"]);return f=function(){return e},e}function g(){let e=(0,s._)(["\n  position: sticky;\n  background-color: transparent;\n  width: 100%;\n"]);return g=function(){return e},e}function h(){let e=(0,s._)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]);return h=function(){return e},e}let P=(0,d.ZP)(u.G)(f()),p=d.ZP.div(g()),v=d.ZP.div(h());var x=e=>{let{currentPage:n,totalPages:t,onNextPage:a,onPreviousPage:o}=e;return(0,r.jsx)(p,{children:(0,r.jsxs)(v,{children:[(0,r.jsx)(i.xb,{href:"#",onClick:o,children:(0,r.jsx)(P,{icon:l.Z$l})}),(0,r.jsx)(i.xv,{color:"#ffbf00",children:"".concat(n," of ").concat(t)}),(0,r.jsx)(i.xb,{href:"#",onClick:a,children:(0,r.jsx)(P,{icon:l.GiB})})]})})},m=()=>{let e=(0,a.I0)(),{search:n,selectedGenres:t,showFilter:s,totalPages:l,currentPage:u}=(0,a.v9)(e=>e.filter),{data:d,isLoading:f,isFetching:g}=(0,o.U9)({search:n,page:u.toString(),genres:t.map(e=>e.id)},{refetchOnMountOrArgChange:!0}),{data:h}=(0,o._)({}),P=!!t.length||n;return(0,r.jsxs)(i.FE,{children:[(0,r.jsx)(i.X6,{showFilter:()=>e((0,c.q$)())}),(0,r.jsx)(x,{currentPage:u,totalPages:l,onNextPage:()=>e((0,c.fz)()),onPreviousPage:()=>e((0,c.IT)())}),s&&(0,r.jsx)(i.wn,{genres:null==h?void 0:h.data.items,onSearch:n=>e((0,c.qP)(n)),onTagClick:n=>e((0,c._N)(n)),search:n}),P&&(0,r.jsx)(i.RN,{search:n,genres:t,onClickTag:n=>e((0,c.mK)(n.id)),onClearSearch:()=>e((0,c.qP)(""))}),g||f?(0,r.jsx)(i.gb,{}):(0,r.jsx)(i.eW,{movies:null==d?void 0:d.data.items,onClick:n=>e((0,c.pW)(n))})]})}},7267:function(e,n,t){"use strict";t.d(n,{IT:function(){return h},_N:function(){return l},fz:function(){return g},mK:function(){return u},pW:function(){return f},q$:function(){return d},qP:function(){return s}});var r=t(4302),a=t(9199);let i=(e,n)=>{let t=n.filter(n=>n.id===e.id);return t.length?n:[...n||[],e]},o=e=>!e,c=(0,r.createSlice)({name:"filter",initialState:{search:"",selectedGenres:[],selectedMovie:null,showFilter:!1,totalPages:1,currentPage:1},reducers:{setSearch:(e,n)=>{e.search=n.payload},addGenre:(e,n)=>{e.selectedGenres=i(n.payload,e.selectedGenres),e.currentPage=1},removeGenre:(e,n)=>{e.selectedGenres=e.selectedGenres.filter(e=>e.id!==n.payload),e.currentPage=1},toggleShowFilter:e=>{e.showFilter=o(e.showFilter)},setSelectedMovie:(e,n)=>{e.selectedMovie=n.payload},nextPage:e=>{e.totalPages!==e.currentPage&&e.currentPage++},previousPage:e=>{1!==e.currentPage&&e.currentPage--}},extraReducers:e=>{e.addMatcher(a.Wu.endpoints.getMovies.matchFulfilled,(e,n)=>{e.totalPages=n.payload.data.meta.totalPages})}}),{setSearch:s,addGenre:l,removeGenre:u,toggleShowFilter:d,setSelectedMovie:f,nextPage:g,previousPage:h}=c.actions;n.ZP=c.reducer},9199:function(e,n,t){"use strict";t.d(n,{Wu:function(){return s},_:function(){return u},U9:function(){return l}});var r=t(8324),a=t(2967),i=e=>{let{arrayParams:n,baseUrl:t,queryParams:r,url:a}=e,i=new URL(a,t),o=new URLSearchParams;if(r&&Object.keys(r).length)for(let e in r)r[e]&&o.append(e,r[e]);if(n&&Object.keys(n).length)for(let e in n)for(let t=0;t<n[e].length;t++)n[e][t]&&o.append(e,n[e][t]);return i.search=o.toString(),i.toString()};let o=(e,n,t)=>{let{limit:r="12",page:a="1",search:o="",genres:c=[]}=t;return i({baseUrl:e,arrayParams:{genres:c},queryParams:{search:o,page:a,limit:r},url:n})},c="http://localhost:5000",s=(0,r.LC)({reducerPath:"movieApi",baseQuery:(0,a.ni)({}),endpoints:e=>({getMovies:e.query({query:e=>o(c,"movies",e)}),getGenres:e.query({query:e=>{let{limit:n="20"}=e;return i({baseUrl:c,url:"genres",queryParams:{limit:n}})}})})}),{useGetMoviesQuery:l,useGetGenresQuery:u}=s}},function(e){e.O(0,[676,877,324,14,992,971,596,744],function(){return e(e.s=7814)}),_N_E=e.O()}]);